<!-- 
©Copyright 2015 - FeedMe
Page de visualisation d'une offre
 -->

<!DOCTYPE html>
<html lang="fr">
	<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Visualiser une offre</title>
    <meta name="description" content="FeedMe est une application de rencontres centré sur la cuisine: vous cuisinez pour des amis à vous, ou de parfaits inconnus, qui quant à eux paient pour venir déguster votre repas.">
    <meta name="keywords" content="cuisine, réseau social, partage, commerce, repas, manger, nourriture, rencontre, aliments, cercle d'amis">
    <meta name="author" content="Team FeedMe">
    
    <!-- Favicons
    ================================================== -->
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="img/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="img/apple-touch-icon-114x114.png">

    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css"  href="resources/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="resources/fonts/font-awesome/css/font-awesome.css">

    <!-- Stylesheet
    ================================================== -->
    <link rel="stylesheet" type="text/css"  href="resources/css/style.css">
    <link rel="stylesheet" type="text/css" href="resources/css/responsive.css">
    <link rel='stylesheet' type='text/css' href='resources/fonts/general-fonts.css'>
    
	<link rel="stylesheet" type='text/css' href="/resources/css/angular-material.min.css">
	
    <script src="/resources/js/angular.min.js"></script>
	</head>
	
	<body ng-app="OffreApp">
		<div ng-include="'/resources/header.html'"></div>	
		<!-- Visualisation des détails de l'offre -->
        <div class="une-offre-body">
            <div class="offre-display text-center" ng-controller="ReservationController">
                <h2>{{offre.titre}}</h2>
                <h3>Repas organisé le {{offre.dateRepas | date:"dd/MM/yyyy 'à' hh'h'mm"}}.</h3>
                <form name="ReservationForm" ng-submit="submitForm()" novalidate>
                    <fieldset>
                    <legend>L'offre de repas</legend>

                    <!-- Présentation de l'hôte, du lieu -->
                    <fieldset>
                    <legend>L'hôte</legend>
                        <h3>Identité :</h3>
                        <!-- Un hôte est un utilisateur : pas de prénom  {{offre.hote.prenom}} -->{{offre.hote.nom}}
                        <h3>Lieu :</h3>
                        {{offre.adresse.voie}} <br>
                        {{offre.adresse.ville.cp}} {{offre.adresse.ville.nom}} ({{offre.adresse.ville.pays.nom}})
                        <h3>Prix par convive :</h3>
                        {{offre.prix}} €
                    </fieldset>

                    <!-- Présentation du menu -->
                    <fieldset>
                    <legend>Le menu</legend>
                        <h3>Type de cuisine :</h3>
                        {{offre.typeCuisine.type}}
                        <h3>Dans votre assiette :</h3>
                        <h4>Entrée(s) :</h4>
                       <pre class="white" > {{offre.menu.entree || "aucunes entrées"}}</pre>
                        <h4>Plat :</h4>
                        <pre class="white" >{{offre.menu.plat}}</pre>
                        <h4>Dessert(s) :</h4>
                       <pre class="white" > {{offre.menu.dessert || "aucuns desserts"}}</pre>
                        <h4>Carte des boissons :</h4>
                        <pre class="white" >{{offre.menu.boisson || "aucunes boissons particulières"}}</pre>
                        <h3>Nombre de couverts restants :</h3>
                        <!-- soit x sur y soit COMPLET -->
                        {{couverts_restants}}
                        <h3>Durée prévisionnelle :</h3>
                        {{offre.dureeMinute}} min.
                    </fieldset>

                    <!-- Informations diverses (et optionnelles) -->
                    <fieldset>
                    <legend>Divers</legend>
                    <div ng-if="animaux">{{animaux}}</div>
                    <div ng-if="age">{{age}}</div>
                    <div ng-if="note">{{note}}</div>
                    </fieldset>

                    <!-- Réservation de places -->		
                    <div > 
                    Réserver
                        <input type="number" name="place" ng-model="place" step="0" ng-required="true" min="1" max="{{nombreRestant}}" id="Nbplace" value="n"/> couvert(s)
                        <span style="color:red" ng-show="ReservationForm.place.$invalid && !ReservationForm.place.$pristine">
                            <span ng-show="ReservationForm.place.$error.required">Veuillez saisir un nombre de place</span>
                            <span ng-show="ReservationForm.place.$error.number">Veuillez saisir un nombre.</span>
                            <span ng-show="ReservationForm.place.$error.min">Vous devez reserver au moins un repas.</span>
                            <span ng-show="ReservationForm.place.$error.max">Vous ne pouvez pas reserver autant de places.</span>
                        </span>
                    </label>
                    <input type="submit" ng-disabled="ReservationForm.$invalid" value="Réserver">
                </div>
            </form>
            </div>
		</div>
		
		<script src="/resources/js/angular-animate.min.js"></script>
	    <script src="/resources/js/angular-aria.min.js"></script>
	    <script src="/resources/js/angular-material.min.js"></script>
	    <script src="/resources/js/moment.js"></script>
		<script src="/resources/js/script-offre.js"></script>
		<!-- Pied de page -->
		<div ng-include="'/resources/footer.html'"></div>
	</body>
</html>
