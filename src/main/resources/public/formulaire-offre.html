<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Proposer une offre</title>
<link rel="stylesheet" type='text/css'
	href="/resources/css/angular-material.min.css">
<link rel="stylesheet" type='text/css'
	href="/resources/css/datetimepicker.css" />
<link rel="stylesheet" type="text/css"
	href="/resources/css/bootstrap.css">
<link rel="stylesheet" type="text/css"
	href="/resources/fonts/font-awesome/css/font-awesome.css">
<link rel="stylesheet" type="text/css" href="/resources/css/style.css">
<link rel="stylesheet" type="text/css"
	href="/resources/css/responsive.css">
<link rel='stylesheet' type='text/css'
	href='/resources/fonts/general-font.css'>
<link rel="stylesheet" type='text/css'
	href="/resources/css/angular.rangeSlider.css">
</head>

<body ng-app="validationOffre">
	<!-- Menu -->
	<div ng-include="'/resources/header.html'"></div>


	<!-- Formulaire de création -->
	<div id="StyleFormulaireOffre" class="text-center">
		<div class="containerFormOffre">
			<div class="general-form">
				<h2>Votre offre :</h2>
				<form name="OffreForm" ng-controller="OffreCtrl"
					ng-submit="submitForm()" novalidate>
					<div class="Aligner">
						<div class="item-view text-left Aligner-item">
							<h2>{{titre}}</h2>
							<p>{{typeCuisine.type}}</p>
							<p>{{prix}} €</p>
							<p>{{nbpers}}</p>
							<p>{{date | date:"dd/MM/yyyy 'à' hh'h'mm"}}</p>
						</div>

					</div>
					<div layout="row">
						<div flex>
							<!-- Détails du repas proposé -->
							<fieldset>
								<legend>Le repas</legend>

								<md-content layout-padding>
								<div layout layout-sm="column">
									<md-input-container flex> <label id="white"
										for="titre">Titre de l'offre :</label> <input id="white"  type="text"
										name="titre" ng-model="titre" ng-required="true"
										placeholder="Titre de l'offre." maxlength="18">
									<div ng-messages="OffreForm.titre.$error">
										<div ng-message="required">Veuillez saisir un titre pour
											l'offre.</div>
									</div>
									</md-input-container>
									<md-input-container flex> <label id="white"
										for="typeCuisine">Type de cuisine :</label> <md-select class="white" 
										name="typeCuisine" ng-model="typeCuisine"
										style="min-width: 200px;"> <md-option  id="back_white"
										ng-value="{{item}}" ng-selected="item.id==1"
										ng-repeat="item in cook">{{item.type}}</md-option> </md-select> </md-input-container>
								</div>
								<div layout layout-sm="column">
									<md-input-container flex> <label id="white"
										for="nbpers">Nombre de convives :</label> <input id="white" type="number"
										name="nbpers" ng-model="nbpers" ng-min="1" ng-required="true"
										placeholder="Nombre de couverts.">
									<div ng-messages="OffreForm.nbpers.$error">
										<div ng-message="min">Veuillez saisir un nombre
											supérieur à 1.</div>
										<div ng-message="required">Veuillez saisir un nombre de
											convives.</div>
										<div ng-message="number">Veuillez saisir un nombre.</div>
									</div>
									</md-input-container>
									<md-input-container flex> <label id="white"
										for="prix">Prix par convive :</label> <input id="white" type="number"
										step="0.1" name="prix" ng-model="prix" ng-min="1.00"
										ng-required="true" placeholder="Prix par convive.">
									<div ng-messages="OffreForm.prix.$error">
										<div ng-message="min">Veuillez saisir un prix supérieur
											à 1.00.</div>
										<div ng-message="required">Veuillez saisir un prix.</div>
										<div ng-message="number">Veuillez saisir un nombre.</div>
									</div>
									</md-input-container>
									<md-input-container flex> <label id="white"
										for="duree">Durée du repas (en min) :</label> <input id="white" 
										type="number" ng-model="duree" name="duree" ng-min="60"
										ng-required="true" placeholder="Durée prévisionnelle.">
									<div ng-messages="OffreForm.duree.$error">
										<div ng-message="min">Veuillez saisir une durée
											supérieur à 60 min.</div>
										<div ng-message="required">Veuillez saisir une durée.</div>
										<div ng-message="number">Veuillez saisir un nombre.</div>
									</div>
									</md-input-container>
								</div>
								<md-input-container flex> <label id="white" for="date">Date
									:</label>

								<div class="dropdown">
									<a class="dropdown-toggle" id="dropdown2" role="button"
										data-toggle="dropdown" data-target="#" href="#">
										<div class="input-group">
											<input id="date" placeholder="Date du repas." readonly="true"
												type="text" min="minDate" class="form-control"
												data-ng-model="date"> <span
												class="input-group-addon"><i
												class="glyphicon glyphicon-calendar"></i></span>
										</div>
									</a>
									<ul  class="dropdown-menu" role="menu" aria-labelledby="dLabel">
										<datetimepicker data-ng-model="date"
											data-datetimepicker-config="{ dropdownSelector: '#dropdown2' }" />
									</ul>
								</div>

								</md-input-container> </md-content>

							</fieldset>

							<!-- détails sur le menu -->
							<fieldset>
								<legend>La carte</legend>

								<md-content layout-padding>
								<div layout layout-sm="column">
									<md-input-container flex> <label id="white"
										for="entree">Entrée(s) :</label> <textarea id="white"  name="entree"
										ng-model="entree" placeholder="Entrées du repas."></textarea>
									</md-input-container>
								</div>
								<div layout layout-sm="column">
									<md-input-container flex> <label id="white"
										for="plat">Plat principal :</label> <textarea id="white" name="plat"
										ng-model="plat" placeholder="Votre plat." ng-required="true"></textarea>
									<div ng-messages="OffreForm.plat.$error">
										<div ng-message="required">Votre menu doit contenir au
											moins un plat.</div>
									</div>
									</md-input-container>
								</div>
								<div layout layout-sm="column">
									<md-input-container flex> <label id="white"
										for="dessert">Dessert(s) :</label> <textarea id="white" name="dessert"
										ng-model="dessert" placeholder="Desserts du repas."></textarea>
									</md-input-container>
								</div>
								<div layout layout-sm="column">
									<md-input-container flex> <label id="white"
										for="boisson">Boisson(s) :</label> <textarea name="boisson" id="white" 
										ng-model="boisson" placeholder="Boissons du repas."></textarea>
									</md-input-container>
								</div>
								</md-content>

							</fieldset>

							<!-- Details sur le lieu de rendez-vous -->
							<fieldset>

								<legend>Lieu</legend>
								<md-content layout-padding>
								<div layout layout-sm="column">
									<md-checkbox ng-model="home" aria-label="home"
										ng-change="homeAction()" ng-disabled="profil.adresse == null">A
									votre domicile</md-checkbox>
								</div>

								<div layout layout-sm="column">
									<md-input-container flex> <label id="white"
										for="numero">Numéro :</label> <input id="white" type="number"
										ng-model="numero" name="numero" ng-min="1"
										placeholder="Numéro de voirie." ng-required="!home"
										ng-disabled="home">
									<div ng-messages="OffreForm.numero.$error">
										<div ng-message="min">Veuillez saisir un numéro valide.</div>
										<div ng-message="required">Veuillez saisir un numéro de
											voirie.</div>
										<div ng-message="number">Veuillez saisir un nombre.</div>
									</div>
									</md-input-container>
									<md-input-container flex> <label id="white" for="rue">Rue
										: </label> <input id="white" type="text" ng-model="rue" name="rue"
										placeholder="Nom de voirie." ng-required="!home"
										ng-disabled="home">
									<div ng-messages="OffreForm.rue.$error">
										<div ng-message="required">Veuillez saisir un nom de
											rue.</div>
									</div>
									</md-input-container>
									<md-input-container flex> <label id="white"
										for="complement">Complément : </label> <input id="white"  type="text"
										name="complement" ng-model="complement"
										placeholder="Compléments." ng-disabled="home"> </md-input-container>

								</div>
								<div layout layout-sm="column">
									<md-input-container flex> <label id="white"
										for="ville">Ville :</label> <input id="white" type="text" name="ville"
										ng-model="ville" placeholder="Votre ville."
										ng-required="!home" ng-disabled="home">
									<div ng-messages="OffreForm.ville.$error">
										<div ng-message="required">Veuillez saisir votre ville.</div>
									</div>
									</md-input-container>
									<md-input-container flex> <label id="white" for="cp">Code
										postal :</label> <input id="white" type="text" name="cp" ng-model="cp"
										ng-pattern="/^[1-9][0-9A-B][0-9]{3}$/"
										placeholder="Votre code postal." ng-required="!home"
										ng-disabled="home">
									<div ng-messages="OffreForm.cp.$error">
										<div ng-message="pattern">Le code postal saisit est
											incorrect.</div>
										<div ng-message="required">Veuillez saisir un code
											postal.</div>
									</div>
									</md-input-container>
									<md-input-container flex> <label id="white"
										for="pays">Pays :</label> <md-select id="white" name="pays"
										ng-model="pays" style="min-width: 200px;" ng-disabled="home">
									<md-option id="back_white" ng-value="{{item}}" ng-selected="item.id==1"
										ng-repeat="item in count">{{item.nom}}</md-option> </md-select> </md-input-container>
								</div>
								</md-content>

							</fieldset>

							<!-- Informations optionnelles que peut renseigner l'utilisateur -->
							<fieldset>
								<legend>Divers</legend>

								<md-content layout-padding>

								<div layout layout-sm="column">

									<md-input-container flex> <label id="white" >Tranche 
										d'âges : de {{age.min}} à {{age.max}} ans</label> <input id="hidden"
										type="text" placeholder="Tranche d'âges." />
									<div id="tranches-ages" range-slider min="18" max="100"
										model-min="age.min" model-max="age.max"></div>
									</md-input-container>
								</div>
								<br>
								<div layout layout-sm="column">
									<md-input-container flex> <label id="white"
										for="note">Remarques :</label> <textarea id="white" name="note"
										ng-model="note" placeholder="Informations complémentaires."></textarea>
									</md-input-container>
								</div>
								<div layout layout-sm="column">
									<md-checkbox ng-model="animal" aria-label="animal">Présence
									d'un animal de compagnie</md-checkbox>
								</div>
								</md-content>

							</fieldset>

							<!-- Validation du formulaire : disponible uniquement quand les champs sont valides -->
							<md-button type="submit" ng-disabled="OffreForm.$invalid"
								class="form">Ajouter</md-button>
						</div>

						<div flex>
							<br> <br>
							<fieldset>

								<h2>{{titre || "Titre non complété"}}</h2>
								<h3>Repas organisé le {{date | date:"dd/MM/yyyy 'à' hh'h'mm"}}.</h3>

								<fieldset class="white">
									<legend>L'offre de repas</legend>

									<!-- Présentation de l'hôte, du lieu -->
									<fieldset class="white">
										<legend>L'hôte</legend>
										<h3>Identité :</h3>
										{{profil.prenom}} {{profil.nom}}
										<h3>Lieu :</h3>
										{{numero}} {{rue}} {{complement}}<br> {{cp}} {{ville}}
										({{pays.nom}})
										<h3>Prix par convive :</h3>
										{{prix}} €
									</fieldset>

									<!-- Présentation du menu -->
									<fieldset class="white">
										<legend>Le menu</legend>
										<h3>Type de cuisine :</h3>
										{{typeCuisine.type}}
										<h3>Dans votre assiette :</h3>
										<br>
										<h4>Entrée(s) :</h4>

										<pre class="white" >{{entree || "aucunes entrées"}}</pre> <br>
										<h4>Plat :</h4>
										<pre class="white" >{{plat || "Plat non complété"}}</pre> <br>
										<h4>Dessert(s) :</h4>

										<pre class="white" >{{dessert || "aucuns desserts"}} </pre><br>
										<h4>Carte des boissons :</h4>

										<pre class="white" >{{boisson || "aucunes boissons particulières"}}</pre> <br> <br>
										<h3>Nombre de couverts restants :</h3>
										<!--  x sur y  -->
										{{nbpers}} sur {{nbpers}}
										<h3>Durée prévisionnelle :</h3>
										{{duree}} min.
									</fieldset>

									<!-- Informations diverses (et optionnelles) -->
									<fieldset class="white">
										<legend class="white">Divers</legend>
										<div ng-if="animal">
											Un animal de compagnie sera présent lors du repas.<br>
										</div>
										<div ng-if="age">
											Ce repas s'adresse aux {{age.min}}-{{age.max}} ans.<br>
										</div>
										<div ng-if="note">{{note}}</div>
									</fieldset>
								</fieldset>
							</fieldset>


						</div>
					</div>

				</form>

			</div>
		</div>
	</div>

	<script src="/resources/js/jquery-2.1.4.min.js"></script>
	<script src="/resources/js/angular.min.js"></script>

	<script src="/resources/js/angular-material.min.js"></script>
	<script src="/resources/js/angular-animate.min.js"></script>
	<script src="/resources/js/angular-aria.min.js"></script>
	<script src="/resources/js/angular-messages.js"></script>

	<script src="/resources/js/moment.js"></script>
	<script src="/resources/js/bootstrap.js"></script>
	<script src="/resources/js/datetimepicker.js"></script>
	<script src="/resources/js/angular.rangeSlider.js"></script>
	<script src="/resources/js/ui-bootstrap-tpls.min.js"></script>

	<script src="/resources/js/script-formulaire-offre.js"></script>

	<!-- Pied de page -->
	<div ng-include="'/resources/footer.html'"></div>

</body>
</html>